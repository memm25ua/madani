---
import Layout from "../layouts/Layout.astro";
import Projects from "../components/Projects.astro";
import Info from "../components/Info.astro";
import Hero from "../components/Hero.astro";
import Experience from "../components/Experience.astro";
---

<Layout>
    <Hero />
    <Projects />
    <Info />
    <Experience />
</Layout>

<style>
    .projects {
        width: 100%;
        min-height: 100vh;
        padding: 10em 0;
        overflow: hidden;
    }
    .container {
        width: 75%;
        margin: 0 auto;
        will-change: transform;
    }

    .row {
        width: 100%;
        height: 900px;
        padding: 5em 0;
        display: flex;
        justify-content: flex-start;
    }

    .row.even {
        justify-content: flex-end;
    }

    .project-item {
        position: relative;
        width: var(--project-width);
        height: 100%;
        border-radius: 0.5em;
        overflow: hidden;
        box-shadow: 0 2px 16px rgba(80, 80, 80, 0.03);
        transition-duration: 300ms;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
    }

    .project-item:hover {
        transition-duration: 150ms;
        box-shadow: 0 4px 24px rgba(80, 80, 80, 0.07);
    }

    .project-img {
        width: 100%;
        height: 100%;
        border-radius: 0.5em;
        overflow: hidden;
        display: flex;
        align-items: flex-start;
        justify-content: center;
    }

    .project-img img {
        object-fit: cover;
        display: block;
        border-radius: 0.5em;
        user-select: none;
        -webkit-user-drag: none;
    }

    .project-details {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        padding: 0.75em 0.5em;
        background: transparent;
    }

    .project-details p#project-name {
        font-weight: 600;
        color: #fff;
        margin: 0;
    }

    .project-details p#project-category {
        color: #fff;
        margin: 0;
    }

    .project-details p {
        font-size: 16px;
    }

    .section-title {
        width: 75%;
        margin: 0 auto 4em auto;
        text-align: left;
    }

    .section-title h2 {
        font-size: clamp(2rem, 5vw, 4rem);
        text-transform: uppercase;
        font-weight: 500;
        margin: 0;
    }

    @media (max-width: 900px) {
        .projects {
            padding: 4em 0;
        }

        .project-item {
            width: 100%;
        }

        .row {
            margin: 2em 0;
            height: 400px;
            padding: 1em 0;
        }
    }
</style>

<script>
    import gsap from "gsap";
    import ScrollTrigger from "gsap/ScrollTrigger";

    if (typeof window !== "undefined") {
        document.addEventListener("DOMContentLoaded", function () {
            // GSAP + SCROLLTRIGGER
            gsap.registerPlugin(ScrollTrigger);

            const tl = gsap.timeline({
                scrollTrigger: {
                    scrub: true,
                },
            });

            const projects = document.querySelectorAll(".project-item");

            projects.forEach((project) => {
                tl.from(project, {
                    translateY: 1000,
                    scale: 0.5,
                });
            });

            // CURSOR HOVER EVENTS
            const setupHover = (element, message, scale) => {
                element?.addEventListener("mouseenter", () => {
                    window.dispatchEvent(
                        new CustomEvent("cursor-hover", {
                            detail: { active: true, message, scale },
                        }),
                    );
                });
                element?.addEventListener("mouseleave", () => {
                    window.dispatchEvent(
                        new CustomEvent("cursor-hover", {
                            detail: { active: false, scale: 1 },
                        }),
                    );
                });
            };

            projects.forEach((project) => {
                setupHover(project, "Ver", 1.5);
            });
        });
    }
</script>
